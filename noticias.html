<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Notícias - ONG Acolhe Pet</title>
        <link rel="stylesheet" href="estilos.css">
    </head>
    <body>
         <nav class="navbar">
            <div class="logo">ONG Acolhe Pet</div>
            <button class="menu-toggle" id="menu-toggle">☰</button>
            <ul class="menu" id="menu">
                <li><a href="index.html">Início</a></li>
                <li><a href="projetos.html">Projetos</a></li>
                <li><a href="cadastro.html">Cadastro</a></li>
                <li><a href="noticias.html">Notícias</a></li>
            </ul>
        </nav>
        <!--Cabeçalho com título-->
        <header>
            <h1>Notícias</h1>
            <p>Acompanhe as últimas notícias e atualizações da nossa ONG.</p>
        </header>
        <!--Seção de notícias-->
        <main>
            <h2>Últimas Notícias</h2>
            <div id="noticias"> </div>
        </main>
        <footer>
            <p>&copy; 2025 ONG Acolhe Pet. Todos os direitos reservados.</p>
        </footer>

        <!-- Botão Voltar ao Topo -->
        <button id="voltar-topo" title="Voltar ao topo">⬆️</button>
        <!--fim botão voltar ao topo-->

        <!--Scripts-->

        <script src="js/menuhamburguer.js"></script>
        <script src="js/botao-topo.js"></script>
        <script src="js/noticias.js"></script>    

       
<div id="noticias">Carregando notícias...</div>

<!--Script API noticias-->

<script>
const chaveApi = "080848a5675849da9062f6f38d263244";
const urlOriginal = `https://newsapi.org/v2/everything?q=animais&language=pt&apiKey=${chaveApi}`;
const url = `https://api.allorigins.win/get?url=${encodeURIComponent(urlOriginal)}`;

document.addEventListener("DOMContentLoaded", async () => {
    const areaNoticias = document.getElementById("noticias");
    if (!areaNoticias) return;

    try {
        const resposta = await fetch(url);
        if (!resposta.ok) throw new Error("Falha na requisição");

        const dados = await resposta.json();
        if (!dados.contents) throw new Error("Conteúdo vazio");

        const conteudo = JSON.parse(dados.contents);
        const noticias = conteudo.articles?.slice(0, 5) || [];

        areaNoticias.innerHTML = ""; // Limpa antes de adicionar

        if (noticias.length === 0) {
            areaNoticias.innerHTML = "<p>Nenhuma notícia encontrada.</p>";
            return;
        }

        noticias.forEach(noticia => {
            const item = document.createElement("div");
            item.innerHTML = `
                <h3>${noticia.title}</h3>
                ${noticia.urlToImage ? `<img src="${noticia.urlToImage}" width="300">` : ""}
                <p>${noticia.description || "Sem descrição disponível."}</p>
                <a href="${noticia.url}" target="_blank">Ler mais</a>
            `;
            const hr = document.createElement("hr");
            areaNoticias.appendChild(item);
            areaNoticias.appendChild(hr);
        });

    } catch (erro) {
        console.error("Erro ao carregar notícias:", erro);
        areaNoticias.innerHTML = "<p>Erro ao carregar notícias.</p>";
    }
});
</script>

</body>
</html>